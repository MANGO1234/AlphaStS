# format

import numpy as np
import matplotlib.pyplot as plt
import sys
import json

plt.style.use('seaborn-whitegrid')
fig, ax = plt.subplots(3)
# ax[0].set_yscale("log")
# ax[1].set_yscale("log")
# ax[2].set_yscale("log")

if len(sys.argv) > 1:
    with open(f'{sys.argv[1]}/training.json', 'r') as f:
        training_info = json.load(f)
    cur_iteration = int(training_info['iteration'])
    info = []
    for i in range(1, cur_iteration):
        info.append(training_info['iteration_info'][str(i)])
    print(f'x0 = np.linspace(0, {cur_iteration - 1}, {cur_iteration - 1})')
    print(f'y0 = [{", ".join([str(x["death_rate"]) for x in info if "death_rate" in x])}]')
    print(f'ax[0].plot(x0, y0, label=\'???\')')
    print(f'y1 = [{", ".join([str(x["avg_dmg_no_death"]) for x in info if "avg_dmg_no_death" in x])}]')
    print(f'ax[1].plot(x0, y1, label=\'???\')')
    print(f'x1 = [{", ".join([str(x["accumulated_time"]) for x in info if "accumulated_time" in x])}]')
    print(f'ax[2].plot(x1, y0, label=\'???\')')
    exit(0)

x0 = np.linspace(0, 70, 70)
y0 = [99.9, 92.6, 87.3, 89.8, 86.3, 82.3, 77.4, 80.4, 65.7, 51.3, 53.3, 51.5, 42.6, 44.5, 45.1, 43.2, 35.33, 33.7, 33.16, 32.13, 28.8, 27.05, 27.49, 27.56, 26.44, 24.86, 24.16, 25.96, 23.94, 21.56, 22.48, 26.1, 21.98, 20.92, 24.5, 20.38,
      20.58, 19.74, 16.44, 18.26, 17.64, 17.66, 18.12, 16.78, 18.88, 15.94, 16.12, 17.52, 17.66, 20.92, 14.6, 20.78, 20.36, 17.98, 16.54, 17.0, 14.28, 14.46, 13.96, 18.48, 13.06, 16.36, 14.76, 14.64, 16.68, 17.9, 14.8, 13.36, 16.32, 15.74]
ax[0].plot(x0, y0, label='???')
y1 = [40.0, 33.14, 26.06, 26.54, 29.08, 30.07, 28.02, 27.59, 24.66, 21.91, 22.9, 23.04, 19.15, 20.83, 22.03, 20.8, 18.54, 17.83, 18.38, 18.12, 18.05, 17.31, 17.89, 17.73, 18.56, 17.26, 17.89, 16.92, 17.18, 16.43, 17.53, 17.62, 17.21, 15.58, 17.58,
      16.26, 16.02, 16.42, 14.98, 15.62, 14.97, 14.07, 14.59, 13.44, 14.68, 13.9, 13.93, 13.19, 14.29, 15.05, 13.4, 14.59, 14.82, 14.51, 13.98, 14.28, 13.0, 13.66, 13.12, 14.3, 12.47, 12.94, 12.92, 12.59, 12.3, 12.81, 11.81, 12.29, 13.66, 12.44]
ax[1].plot(x0, y1, label='???')
x1 = [22.25, 44.02, 71.03, 102.17, 139.72, 181.25, 226.39, 273.93, 321.07, 368.33, 417.6, 468.45, 523.83, 576.59, 627.81, 685.32, 735.59, 788.33, 842.65, 895.91, 951.06, 1029.74, 1118.85, 1193.22, 1275.35, 1352.42, 1435.31, 1511.54, 1588.65, 1664.14, 1751.14, 1823.58, 1905.02, 1981.28, 2052.95, 2120.49, 2192.44, 2263.27, 2337.13, 2408.16, 2490.38,
      2566.39, 2639.0299999999997, 2713.33, 2788.64, 2863.0699999999997, 2935.92, 3015.4300000000003, 3097.54, 3179.12, 3249.58, 3335.69, 3415.5899999999997, 3486.8599999999997, 3558.7999999999997, 3633.27, 3705.92, 3776.63, 3851.0299999999997, 3924.93, 3996.84, 4070.41, 4152.95, 4231.63, 4310.5, 4384.92, 4463.29, 4548.09, 4621.2, 4700.969999999999]
ax[2].plot(x1, y0, label='???')

x0 = np.linspace(0, 70, 70)
y0 = [100.0, 92.6, 96.0, 93.8, 96.8, 92.6, 91.8, 88.6, 87.4, 87.4, 85.0, 87.7, 80.0, 78.1, 79.2, 74.6, 75.4, 74.0, 68.12, 69.6, 67.77, 65.78, 66.16, 65.78, 66.5, 60.58, 56.2, 56.06, 57.04, 55.38, 49.7, 48.4, 45.02, 37.32, 39.9, 31.38,
      29.72, 25.3, 27.5, 27.32, 23.58, 23.62, 31.78, 27.26, 23.96, 25.92, 21.04, 25.12, 19.16, 24.12, 18.88, 19.76, 19.2, 20.5, 19.2, 20.62, 15.66, 21.76, 24.4, 20.92, 18.68, 17.32, 18.24, 19.12, 18.04, 17.96, 18.14, 20.98, 15.7, 15.68]
ax[0].plot(x0, y0, label='???')
y1 = [54.0, 30.59, 30.88, 33.16, 37.91, 34.15, 35.5, 34.19, 34.24, 35.29, 33.6, 32.61, 31.57, 30.78, 31.82, 31.58, 29.64, 30.29, 31.3, 30.09, 30.94, 29.31, 30.37, 29.24, 30.09, 28.14, 27.75, 28.23, 28.59, 29.29, 27.34, 27.6, 25.75, 25.38, 25.66,
      23.41, 24.5, 22.12, 22.75, 22.23, 20.96, 20.22, 22.08, 20.02, 19.97, 19.29, 18.49, 19.39, 17.0, 18.31, 17.23, 16.85, 15.44, 15.92, 15.7, 16.53, 13.72, 16.66, 16.48, 16.95, 14.61, 14.17, 14.07, 14.57, 13.25, 13.68, 14.95, 15.38, 13.28, 13.35]
ax[1].plot(x0, y1, label='???')
x1 = [25.29, 47.1, 74.85, 109.23, 156.02, 201.61, 253.02, 309.78, 368.42, 430.67, 491.25, 553.03, 620.45, 684.09, 749.8, 813.81, 876.18, 941.93, 1008.83, 1075.21, 1148.03, 1220.63, 1290.12, 1360.57, 1433.79, 1510.58, 1581.05, 1651.69, 1725.87, 1797.21, 1876.47, 1951.6, 2023.3, 2093.36, 2166.45, 2239.54, 2312.39,
      2386.93, 2459.65, 2533.77, 2603.12, 2670.7, 2738.72, 2807.86, 2874.03, 2939.54, 3003.11, 3065.87, 3132.06, 3196.44, 3256.73, 3314.16, 3370.9, 3431.04, 3491.28, 3550.79, 3610.66, 3672.21, 3735.56, 3802.7200000000003, 3865.71, 3927.36, 3988.79, 4051.55, 4112.74, 4175.52, 4235.25, 4298.63, 4359.24, 4425.03]
ax[2].plot(x1, y0, label='???')

x0 = np.linspace(0, 70, 70)
y0 = [100.0, 98.0, 97.3, 93.4, 85.4, 86.8, 80.5, 79.0, 81.5, 76.4, 81.7, 72.3, 73.1, 73.2, 69.7, 75.5, 68.0, 68.55, 63.24, 62.5, 59.43, 58.42, 56.42, 54.3, 58.54, 49.54, 47.26, 47.76, 41.54, 42.08, 44.0, 37.62, 42.58, 32.72, 32.5, 30.9,
      25.58, 26.96, 25.54, 23.32, 26.84, 19.78, 25.48, 23.8, 20.08, 23.02, 23.8, 21.66, 18.22, 16.22, 16.42, 22.1, 19.18, 19.32, 16.16, 14.54, 16.18, 17.58, 16.4, 15.02, 16.28, 14.1, 17.98, 17.92, 17.3, 14.74, 14.86, 20.48, 18.84, 15.84]
ax[0].plot(x0, y0, label='???')
y1 = [54.0, 37.65, 32.04, 31.61, 27.5, 30.68, 27.3, 23.81, 25.08, 25.1, 26.74, 22.47, 22.82, 26.5, 20.29, 23.36, 22.92, 22.49, 20.73, 21.85, 20.73, 21.11, 20.64, 20.85, 23.47, 20.22, 20.05, 20.68, 19.48, 19.81, 19.05, 18.84, 20.16, 18.67, 17.66,
      17.8, 16.6, 17.68, 17.11, 15.92, 17.57, 15.53, 15.72, 16.77, 15.23, 16.68, 15.81, 16.09, 14.25, 13.69, 13.04, 13.87, 14.82, 13.25, 12.69, 11.41, 12.84, 12.25, 11.53, 11.51, 10.45, 11.38, 12.28, 12.42, 11.94, 12.41, 11.35, 13.84, 12.09, 11.88]
ax[1].plot(x0, y1, label='???')
x1 = [31.4, 64.58, 107.92, 158.2, 212.37, 269.61, 328.9, 396.69, 465.25, 535.38, 604.31, 676.46, 749.6, 825.91, 906.02, 984.59, 1063.81, 1142.16, 1217.13, 1302.91, 1385.98, 1467.86, 1548.95, 1639.79, 1728.21, 1810.55, 1891.53, 1970.89, 2049.45, 2126.12, 2211.3599999999997, 2294.21, 2380.38, 2464.72, 2546.94, 2628.23, 2710.39, 2790.0099999999998,
      2870.66, 2951.0499999999997, 3032.99, 3112.98, 3185.67, 3256.62, 3327.6099999999997, 3405.7299999999996, 3478.3, 3551.74, 3620.93, 3691.21, 3760.51, 3831.03, 3901.13, 3975.03, 4043.17, 4111.95, 4188.88, 4260.78, 4334.33, 4416.3, 4514.72, 4607.76, 4683.13, 4761.38, 4840.98, 4916.860000000001, 4996.18, 5074.5, 5159.75, 5243.12]
ax[2].plot(x1, y0, label='???')

ax[0].legend()
ax[1].legend()
ax[2].legend()

plt.show()
