# format

import numpy as np
import matplotlib.pyplot as plt
import sys
import json

plt.style.use('seaborn-whitegrid')
fig, ax = plt.subplots(3)
# ax[0].set_yscale("log")
# ax[1].set_yscale("log")
# ax[2].set_yscale("log")

if len(sys.argv) > 1:
    with open(f'{sys.argv[1]}/training.json', 'r') as f:
        training_info = json.load(f)
    cur_iteration = int(training_info['iteration'])
    info = []
    for i in range(1, cur_iteration):
        info.append(training_info['iteration_info'][str(i)])
    print(f'x0 = np.linspace(0, {cur_iteration - 1}, {cur_iteration - 1})')
    print(f'y0 = [{", ".join([str(x["death_rate"]) for x in info])}]')
    print(f'ax[0].plot(x0, y0, label=\'???\')')
    print(f'y1 = [{", ".join([str(x["avg_dmg_no_death"]) for x in info])}]')
    print(f'ax[1].plot(x0, y1, label=\'???\')')
    print(f'x1 = [{", ".join([str(x["accumulated_time"]) for x in info])}]')
    print(f'ax[2].plot(x1, y0, label=\'???\')')
    exit(0)

x0 = np.linspace(0, 30, 30)
y0 = [100.0, 100.0, 55.5, 48.0, 39.1, 34.1, 25.7, 21.9, 16.6, 19.0, 17.4, 17.9, 16.4, 16.9, 14.7, 13.5, 12.07, 13.5, 9.68, 8.27, 8.2, 9.4, 7.24, 7.54, 7.18, 7.08, 7.82, 7.56, 7.54, 7.92]
ax[0].plot(x0, y0, label='Laga')
y1 = [73.0, 73.0, 46.88, 44.38, 46.12, 43.84, 44.52, 43.12, 43.43, 44.03, 42.83, 43.6, 42.09, 41.03, 41.14,
      40.82, 41.93, 42.25, 41.53, 40.5, 40.69, 41.78, 40.14, 40.47, 39.63, 39.47, 39.0, 39.22, 39.88, 39.71]
ax[1].plot(x0, y1, label='Laga')
x1 = [15.67, 27.95, 41.27, 58.03, 75.56, 95.08, 114.86, 135.61, 157.5, 178.9, 202.72, 227.56, 256.57, 279.42, 302.69,
      325.94, 349.58, 368.98, 389.63, 410.87, 433.25, 455.72, 479.05, 503.04, 527.02, 550.73, 574.95, 598.49, 622.44, 645.78]
ax[2].plot(x1, y0, label='Laga')

x0 = np.linspace(0, 30, 30)
y0 = [100.0, 99.3, 19.9, 22.7, 29.5, 28.1, 24.3, 23.7, 27.7, 24.3, 21.1, 19.9, 21.1, 16.0, 14.2, 16.9, 13.67, 14.6, 12.96, 11.4, 12.8, 11.6, 12.8, 9.78, 10.3, 9.02, 8.76, 7.7, 7.1, 7.48]
ax[0].plot(x0, y0, label='Laga #2')
y1 = [73.0, 57.14, 46.84, 45.31, 45.44, 47.09, 47.26, 46.5, 46.94, 46.8, 46.04, 45.14, 44.69, 44.18, 43.33,
      42.14, 42.75, 43.11, 42.63, 42.78, 42.4, 41.89, 41.65, 41.61, 41.52, 41.22, 40.37, 40.41, 40.68, 39.39]
ax[1].plot(x0, y1, label='Laga #2')
x1 = [17.95, 33.05, 46.49, 61.52, 77.37, 95.54, 114.26, 133.18, 152.97, 173.18, 193.23, 212.6, 232.79, 252.98, 272.09,
      291.86, 312.41, 333.42, 356.08, 378.67, 401.46, 424.58, 448.78, 472.89, 499.17, 525.47, 550.09, 575.86, 600.43, 625.73]
ax[2].plot(x1, y0, label='Laga #2')

x0 = np.linspace(0, 30, 30)
y0 = [100.0, 100.0, 50.3, 45.6, 47.3, 39.6, 41.2, 40.8, 46.1, 37.4, 31.0, 27.8, 24.0, 22.3, 21.0, 16.3, 17.87, 17.3, 11.16, 11.33, 10.49, 7.7, 8.2, 7.58, 7.7, 7.74, 7.6, 6.78, 7.34, 6.96]
ax[0].plot(x0, y0, label='Laga #3')
y1 = [73.0, 73.0, 47.14, 48.71, 49.76, 49.21, 49.2, 48.65, 46.74, 46.22, 44.8, 45.27, 44.06, 44.52, 43.37,
      41.4, 41.48, 42.22, 40.49, 40.8, 40.35, 39.41, 39.88, 40.52, 39.58, 39.25, 39.07, 38.85, 39.44, 38.47]
ax[1].plot(x0, y1, label='Laga #3')
x1 = [16.11, 28.62, 42.02, 57.33, 73.91, 93.56, 114.19, 135.76, 158.34, 179.97, 201.16, 221.87, 242.87, 263.4, 283.92,
      305.38, 327.49, 349.08, 373.03, 395.74, 418.95, 442.68, 467.51, 491.23, 517.29, 542.32, 568.01, 592.76, 618.2, 643.49]
ax[2].plot(x1, y0, label='Laga #3')

x0 = np.linspace(0, 30, 30)
y0 = [100.0, 100.0, 47.2, 46.2, 42.9, 38.3, 32.6, 22.7, 23.8, 18.5, 16.6, 16.8, 13.2, 14.0, 10.6, 11.0, 9.53, 8.65, 8.88, 10.0, 7.89, 9.32, 8.2, 7.9, 7.88, 8.04, 8.46, 7.92, 8.44, 7.92]
ax[0].plot(x0, y0, label='Laga Line Traing')
y1 = [73.0, 73.0, 50.64, 47.82, 48.06, 48.0, 47.84, 46.54, 48.22, 46.48, 45.17, 45.58, 44.19, 43.82, 43.14,
      43.58, 43.22, 42.25, 41.64, 41.7, 40.07, 40.56, 40.87, 40.83, 40.82, 39.7, 40.03, 40.65, 39.55, 40.37]
ax[1].plot(x0, y1, label='Laga Line Traing')
x1 = [18.95, 36.17, 54.53, 74.29, 96.25, 119.32, 143.85, 168.24, 193.41, 218.6, 244.07, 267.69, 292.22, 317.51, 342.43,
      366.7, 390.96, 419.74, 446.82, 474.89, 503.27, 532.66, 563.02, 593.52, 624.41, 654.41, 684.43, 714.5, 745.53, 776.13]
ax[2].plot(x1, y0, label='Laga Line Traing')

x0 = np.linspace(0, 30, 30)
y0 = [100.0, 100.0, 68.4, 63.1, 60.8, 45.7, 44.5, 41.3, 39.8, 35.3, 29.2, 27.2, 21.2, 22.2, 17.2, 11.4, 11.13, 10.8, 11.48, 10.17, 9.34, 7.45, 7.33, 7.84, 7.54, 7.32, 7.22, 8.14, 8.24, 6.92]
ax[0].plot(x0, y0, label='Laga Line Training #2')
y1 = [73.0, 73.0, 53.3, 55.59, 56.65, 53.99, 52.87, 53.4, 51.43, 51.42, 49.9, 49.64, 46.06, 46.61, 43.07,
      42.46, 42.43, 41.9, 41.51, 41.41, 40.23, 40.12, 40.4, 39.95, 39.79, 39.99, 39.2, 39.01, 39.34, 39.45]
ax[1].plot(x0, y1, label='Laga Line Training #2')
x1 = [24.49, 43.1, 61.28, 79.82, 100.59, 123.22, 145.98, 169.98, 194.87, 218.52, 242.89, 268.0, 293.24, 318.38, 342.05,
      366.46, 390.55, 415.75, 441.2, 468.31, 495.32, 522.44, 552.32, 580.79, 608.89, 637.69, 669.81, 702.13, 731.77, 762.17]
ax[2].plot(x1, y0, label='Laga Line Training #2')

x0 = np.linspace(0, 30, 30)
y0 = [100.0, 99.9, 60.1, 50.4, 39.5, 31.1, 30.0, 30.4, 21.3, 20.6, 15.7, 15.6, 17.0, 18.3, 15.4, 14.5, 13.73, 12.55, 11.12, 10.8, 9.46, 8.0, 7.53, 7.46, 7.8, 8.04, 7.6, 6.8, 8.06, 7.18]
ax[0].plot(x0, y0, label='Laga Line Training #3')
y1 = [73.0, 70.0, 53.84, 54.73, 50.57, 47.22, 47.17, 43.82, 42.29, 42.58, 41.76, 42.47, 42.17, 41.18, 41.04,
      41.15, 41.2, 40.5, 40.26, 40.45, 39.93, 39.63, 40.56, 40.58, 39.54, 39.09, 39.3, 39.38, 39.7, 39.84]
ax[1].plot(x0, y1, label='Laga Line Training #3')
x1 = [19.62, 35.93, 52.71, 72.51, 92.91, 115.84, 138.66, 162.16, 186.87, 212.33, 237.22, 261.44, 285.3, 309.82, 334.31,
      361.84, 387.72, 415.92, 443.42, 470.51, 501.83, 530.72, 558.67, 587.25, 618.62, 647.16, 676.44, 705.97, 736.18, 765.74]
ax[2].plot(x1, y0, label='Laga Line Training #3')

# x0 = np.linspace(0, 30, 30)
# y0 = [100.0, 100.0, 65.5, 55.9, 50.7, 36.2, 22.9, 19.1, 15.0, 11.4, 12.9, 9.8, 8.8, 9.4, 7.7, 9.0, 9.53, 10.25, 10.24, 9.7, 9.6, 8.77, 8.8, 8.8, 7.56, 7.9, 10.3, 10.18, 10.58, 9.56]
# ax[0].plot(x0, y0, label='Laga Fast Line')
# y1 = [73.0, 73.0, 53.53, 49.45, 48.47, 47.76, 46.39, 44.99, 43.96, 42.83, 42.0, 41.49, 42.18, 41.64, 41.96,
#       41.72, 42.62, 41.82, 41.26, 41.65, 41.73, 41.9, 41.76, 41.67, 42.03, 41.88, 41.74, 42.07, 41.59, 40.82]
# ax[1].plot(x0, y1, label='Laga Fast Line')
# x1 = [13.79, 25.71, 37.68, 53.75, 74.5, 92.65, 109.83, 129.58, 152.66, 174.64, 197.3, 218.27, 236.25, 254.26, 274.35,
#       294.75, 316.83, 339.15, 360.4, 382.59, 404.25, 428.34, 458.68, 486.58, 514.4, 540.41, 572.63, 600.81, 630.12, 658.15]
# ax[2].plot(x1, y0, label='Laga Fast Line')

# x0 = np.linspace(0, 30, 30)
# y0 = [100.0, 100.0, 64.9, 55.6, 48.3, 25.2, 18.7, 12.2, 13.9, 10.1, 8.1, 9.9, 12.6, 10.5, 10.7, 11.5, 7.8, 10.1, 10.56, 7.8, 8.4, 10.23, 8.8, 9.68, 9.64, 8.6, 8.5, 7.26, 6.9, 7.88]
# ax[0].plot(x0, y0, label='Laga Fast Line #2')
# y1 = [73.0, 73.0, 54.87, 54.52, 53.68, 48.74, 47.22, 46.21, 45.1, 44.87, 43.4, 41.97, 42.0, 42.35, 42.63,
#       41.54, 42.9, 42.18, 41.58, 41.53, 40.91, 40.14, 39.38, 39.96, 39.76, 40.55, 41.4, 40.82, 41.42, 41.19]
# ax[1].plot(x0, y1, label='Laga Fast Line #2')
# x1 = [14.58, 27.86, 39.64, 56.34, 74.65, 92.26, 112.52, 134.52, 156.45, 181.18, 203.56, 228.67, 251.47, 274.03, 296.17,
#       321.32, 344.85, 367.56, 391.38, 416.31, 442.89, 465.9, 490.17, 516.67, 542.71, 569.17, 594.61, 623.46, 650.21, 676.56]
# ax[2].plot(x1, y0, label='Laga Fast Line #2')

# x0 = np.linspace(0, 30, 30)
# y0 = [99.8, 95.0, 57.3, 43.8, 32.6, 26.6, 21.9, 18.8, 18.5, 14.0, 12.4, 7.7, 9.9, 8.9, 9.2, 8.8, 8.47, 8.65, 9.24, 9.3, 9.94, 9.93, 8.71, 8.68, 8.94, 7.88, 8.62, 7.9, 8.12, 8.24]
# ax[0].plot(x0, y0, label='Laga Fast Line #3')
# y1 = [40.5, 63.12, 54.91, 48.27, 45.15, 45.77, 45.9, 46.28, 46.6, 45.17, 43.04, 42.33, 41.76, 42.28, 42.05,
#       42.1, 40.87, 39.66, 40.12, 39.93, 39.61, 39.33, 39.08, 40.87, 40.26, 39.61, 41.24, 41.46, 40.87, 40.35]
# ax[1].plot(x0, y1, label='Laga Fast Line #3')
# x1 = [15.58, 28.44, 40.55, 54.43, 75.71, 94.03, 114.34, 134.3, 155.21, 176.15, 197.4, 219.98, 241.44, 262.29, 284.79,
#       309.19, 331.91, 354.96, 380.01, 405.51, 431.86, 464.06, 489.94, 517.1, 545.57, 574.19, 600.64, 628.65, 654.3, 682.36]
# ax[2].plot(x1, y0, label='Laga Fast Line #3')

x0 = np.linspace(0, 30, 30)
y0 = [100.0, 97.2, 66.7, 32.3, 29.6, 15.8, 11.7, 8.9, 9.1, 9.6, 8.8, 8.0, 10.8, 8.7, 11.5, 12.1, 10.07, 10.5, 7.68, 8.0, 8.86, 8.07, 7.82, 7.62, 7.04, 7.58, 8.36, 8.0, 7.5, 8.68]
ax[0].plot(x0, y0, label='???')
y1 = [73.0, 57.89, 57.99, 51.89, 49.08, 46.34, 43.76, 43.1, 43.31, 41.92, 42.46, 41.01, 40.43, 41.13, 40.48,
      40.99, 39.37, 39.95, 41.87, 41.67, 41.01, 40.54, 39.92, 40.8, 40.4, 39.7, 39.21, 39.65, 39.59, 39.55]
ax[1].plot(x0, y1, label='???')
x1 = [12.53, 24.15, 35.79, 48.47, 63.15, 79.37, 94.71, 110.83, 126.6, 143.68, 160.89, 178.23, 195.33, 212.62, 229.89,
      247.64, 267.04, 287.72, 308.53, 329.39, 351.33, 372.6, 394.62, 417.46, 440.8, 464.21, 489.43, 512.94, 536.47, 560.09]
ax[2].plot(x1, y0, label='???')


ax[0].legend()
ax[1].legend()
ax[2].legend()

plt.show()
